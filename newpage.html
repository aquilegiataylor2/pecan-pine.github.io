<!DOCTYPE html>
<html>
<meta charset="UTF-8">

	<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="bar_graph.css">
	<link rel="stylesheet" type="text/css" href="newpage.css">
	<title>Pecan Pine Homepage</title>
	<script>
	var center = [300, 200];
	function ellipsePos(element, xCenter, yCenter, xRadius, yRadius){
	    function positionMe (angle){
	        angle = angle / 100;
	        var xCoord = xCenter + xRadius * Math.cos(angle);
	        var yCoord = yCenter + yRadius * Math.sin(angle);
	        element.style.left = xCoord.toString() + "px";
	        element.style.top = yCoord.toString() + "px";
	        angle = angle % (2 * Math.PI);
	        if ( Math.abs(angle) < .01 ){
	            element.style.zIndex = 10;
	        }
	        if (Math.abs(angle - Math.PI) < .01){
	            element.style.zIndex = -10;
	        }
	    }
	    return positionMe;
	}
	
    function ellipsePos2(element, xCenter, yCenter, xRadius, yRadius){
	    function positionMe (angle){
	        angle = angle / 100;
	        //var xCoord = xCenter + xRadius * Math.cos(angle);
	        //var yCoord = yCenter + yRadius * Math.sin(angle);
	        var xCoord = -5 + 25 * Math.cos(angle);
	        var yCoord = 35 + 35 * Math.sin(angle);	        
	        element.style.left = xCoord.toString() + "%";
	        element.style.top = yCoord.toString() + "%";
	        angle = angle % (2 * Math.PI);
	        if ( Math.abs(angle) < .01 ){
	            element.style.zIndex = 10;
	        }
	        if (Math.abs(angle - Math.PI) < .01){
	            element.style.zIndex = -10;
	        }
	    }
	    return positionMe;
	}

	function uniformOrbit(element){
	    return ellipsePos(element, center[0] + 50, center[1] + 50, 150, 50)
	}
	async function onload(){
	    var res = document.getElementById("resume");
	    var cat = document.getElementById("octocat");
	    var me = document.getElementById("me");
	    var planet = document.getElementById("planet");
	    var linkedin = document.getElementById("linkedin");
	    var sun = document.getElementById("sun");
	    var planetOrbital = document.getElementById("planetOrbital");
	    planetOrbital.position="absolute";
	    //sun.style.position="absolute";
	    res.style.position="absolute";
	    cat.style.position="relative";
	    me.style.position="absolute";
	    planet.style.position="absolute";
	    linkedin.style.position="absolute";
        
        //sun.style.position="fixed";
        //sun.style.left = "300px";
        //sun.style.top = "100px";
        let sunStyle = window.getComputedStyle(sun);
        let sunLeft = parseFloat(sunStyle.getPropertyValue("left").slice(0,-2));
        let sunTop = parseFloat(sunStyle.getPropertyValue("top").slice(0,-2));
        
        planetOrbit = ellipsePos(planet, center[0], center[1], 200, 200);
        //planetOrbital = ellipsePos2(planetOrbital, 0.2 * sunLeft, sunTop - 200, 220, 60);
        planetOrbital = ellipsePos(planetOrbital, -120, 70, 225, 40);
	    catOrbit = uniformOrbit(cat);
	    resOrbit = uniformOrbit(res);
	    meOrbit = uniformOrbit(me);
	    linOrbit = uniformOrbit(linkedin);
	    linkedin.style.zIndex = -10;
	    res.style.zIndex = 10;
        planet.style.left = center[0].toString() + "px";
        planet.style.top = center[1].toString() + "px";	    
        
        for (i = 0; i < 10000; i++){
            planetOrbital(i);
            catOrbit(i);
	        resOrbit(i + 100 * 2 * Math.PI / 3);
	        linOrbit(i + 100 * 4 * Math.PI / 3);
            await sleep(20);
        }
	}
	function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
	</script>
	</head>
	
<body id="body" onload="onload()">

<span> Welcome to the Pecan Pine homepage! </span>
<div id="solarSystem" class="centered">
<div id="planetOrbital" style="transform:scale(0.5); position: relative; top: -100px; left: 300px;">
<a href="resume.pdf" target="_blank" rel="noopener noreferrer"> <img src="resume_text.png" id="resume" height="100px"/></a>
<a href="https://github.com/pecan-pine" target="_blank" rel="noopener noreferrer" > <img src="Octocat.png" id="octocat" height="100px"/> </a>
<span id="me"></span>
<!-- <img src="me.png" id="me" height="100px"/>-->
<img src="planet3.png" id="planet" height="200px" z-index="5"/>
<a href="https://www.linkedin.com/in/nathan-taylor-74312a184" target="_blank" rel="noopener noreferrer" ><img src="linkedin.png" id="linkedin" height="100px"/></a>
</div>

<img src="sun.png" id="sun" height="300px"/>
<div>
 <!-- Draggable DIV -->
<div id="move" class="move" style="position:absolute;">
<!-- <img src="me.png" height="100px"/>-->
</div> 
<script>
// Make the DIV element draggable:
//dragElement(document.getElementById("move"));
//dragElement(document.getElementById("planet"));

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  elmnt.onmousedown = dragMouseDown;

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
    //alert("dragmouseDown");
  }

  function elementDrag(e) {
    //alert("elementDrag");
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    // stop moving when mouse button is released:
    //alert("closedragelement");
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
</script>
</body> 
</html>
